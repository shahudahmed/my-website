<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Blog Posts</title>
  <style>
    .post { border: 1px solid #ccc; padding: 10px; margin: 10px; }
    img { max-width: 100%; height: auto; }
  </style>
</head>
<body>

  <h1>Latest Blog Posts</h1>
  <div id="blog-container"></div>

  <script>
    const sanityProjectId = "x2dxeg98"; // 🔁 Replace with your real ID
    const dataset = "production";

    async function fetchBlogs() {
      const query = '*[_type == "post"]{title, slug, mainImage{asset->{url}}, body}';
      const url = `https://${sanityProjectId}.api.sanity.io/v2023-06-01/data/query/${dataset}?query=${encodeURIComponent(query)}`;

      try {
        const res = await fetch(url);
        const data = await res.json();
        const blogs = data.result;

        const container = document.getElementById("blog-container");

        blogs.forEach((post) => {
          const div = document.createElement("div");
          div.className = "post";

          div.innerHTML = `
            <h2>${post.title}</h2>
            ${post.mainImage ? `<img src="${post.mainImage.asset.url}" alt="Blog Image"/>` : ''}
            <p>${post.body ? '[Content Available]' : '[No content loaded here]'}</p>
          `;

          container.appendChild(div);
        });
      } catch (err) {
        console.error("Error fetching blog posts:", err);
      }
    }

    fetchBlogs();
  </script>

</body>
</html>
