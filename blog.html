<script>
  const spaceId = 'n824nrvxub4b';
  const accessToken = 'mjxr5BJo2Z61nTitnbZEKdVRGW9_eVsESA5mMeMTaJg';
  const contentType = 'blogPost'; // make sure this matches what you named in Contentful

  fetch(`https://cdn.contentful.com/spaces/${spaceId}/entries?access_token=${accessToken}&content_type=${contentType}&order=-fields.publishDate&include=1`)
    .then((res) => res.json())
    .then((data) => {
      const blogContainer = document.getElementById('blog-posts');
      const assets = data.includes.Asset;

      data.items.forEach((item) => {
        const { title, content, slug, publishDate, thumbnail } = item.fields;

        const imageId = item.fields.thumbnail.sys.id;
        const imageUrl = assets.find(asset => asset.sys.id === imageId).fields.file.url;

        blogContainer.innerHTML += `
          <div class="blog-post" style="margin-bottom: 30px;">
            <img src="https:${imageUrl}" style="width: 100%; max-width: 600px;" />
            <h2>${title}</h2>
            <p><strong>Date:</strong> ${new Date(publishDate).toDateString()}</p>
            <p>${content.content[0].content[0].value}</p>
          </div>
        `;
      });
    })
    .catch((err) => console.error("Contentful error:", err));
</script>
